<div class="stock-container">
  <h2>Stock Items</h2>

  <div class="stock-actions">
    <button class="btn-add-item" [routerLink]="['/employee/stock/add-item']">+ Add New Item</button>
  </div>

  @if (loading) {
  <p>Loading stock...</p>
} @else if (error) {
  <p class="error">{{ error }}</p>
} @else {
  <div class="stock-container">
    @for (group of (groupedStock | keyvalue); track group.key) {
      <div class="stock-group">
        <h3>{{ group.key }}</h3>
        <table class="stock-table">
          <thead>
            <tr>
              <th>ID</th>
              <th>Name</th>
              <th>Brand</th>
              <th>Quantity</th>
              <th>Full Stock</th>
              <th>Price (R)</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            @for (item of group.value; track item.id) {
              <tr>
                <td>{{ item.id }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.brand }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item['full-stock'] }}</td>
                <td>{{ item.price }}</td>
                <td>
                  <button (click)="openModal(item)">Add</button>
                  <button (click)="openDeleteModal(item)" class="delete-btn">Delete</button>
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    }
  </div>
}

</div>

<!-- Load Stock Modal -->
 @if (showModal && selectedItem) {
  <div class="modal-overlay">
    <div class="modal">
      <h3>Load Stock: {{ selectedItem.name }}</h3>

      <p>Current: {{ selectedItem.quantity }} / {{ selectedItem['full-stock'] }}</p>

      <input type="number" [(ngModel)]="addAmount" placeholder="Enter amount" />

      @if (validationError) {
        <p class="error">{{ validationError }}</p>
      }

      <div class="modal-actions">
        <button class="btn-cancel" (click)="closeModal()">Cancel</button>
        <button class="btn-add" (click)="confirmAdd()">Add</button>
      </div>
    </div>
  </div>
 }
 <!-- Delete Confirmation Modal -->
@if (showDeleteConfirm && itemToDelete) {
  <div class="modal-overlay">
    <div class="modal">
      <h3>Confirm Delete</h3>
      <p>Are you sure you want to delete <strong>{{ itemToDelete.name }}</strong>?</p>
      <div class="modal-actions">
        <button class="btn-cancel" (click)="closeDeleteModal()">Cancel</button>
        <button class="btn-delete" (click)="confirmDelete()">Delete</button>
      </div>
    </div>
  </div>
}



 
